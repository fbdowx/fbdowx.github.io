// Mapping of languages to their respective paths
const languagePaths = {
  "en": "/index.html",
  "pt": "/pt/",
  "es": "/es/",
  "fil": "/fil/",
  "ar": "/ar/",
  "bn": "/bn/",
  "id": "/id/",
  "th": "/th/",
  "vi": "/vi/"
};

// Function to get the current language from <html lang="...">
function getCurrentLanguage() {
  const htmlLang = document.documentElement.lang;
  // Extract the language code part if it includes a region
  return htmlLang.split('-')[0];
}

const dropdownBtn = document.getElementById("dropdown-btn");
const dropdownContent = document.getElementById("dropdown-content");

// Function to handle when a locale is selected
function setSelectedLocale(locale) {
  dropdownBtn.innerHTML = `${locale.toUpperCase()} <span class="arrow-up"></span>`;
  // Redirect based on the selected locale
  if (languagePaths.hasOwnProperty(locale)) {
    window.location.href = languagePaths[locale];
  }
}

// Initialize dropdown with current language
const currentLang = getCurrentLanguage();
setSelectedLocale(currentLang);

// Event listeners for each locale item in the dropdown
Object.keys(languagePaths).forEach(locale => {
  const listEl = document.createElement("li");
  listEl.innerHTML = `${locale.toUpperCase()}`;
  listEl.addEventListener("click", function () {
    setSelectedLocale(locale);
  });
  dropdownContent.appendChild(listEl);
});
